const search=document.querySelector(".search"),searchToggle=search.querySelector(".search__button__toggle"),searchModal=search.querySelector(".search__modal"),buttonModal=searchModal.querySelector(".search__button__modal"),inputModal=searchModal.querySelectorAll("input"),inputRequired=searchModal.querySelectorAll("input[required]"),inputDate=searchModal.querySelectorAll(".search__date"),inputCount=searchModal.querySelectorAll(".search__count");let missing=!1;const btnMinus=searchModal.querySelectorAll(".search__btn__minus"),btnPlus=searchModal.querySelectorAll(".search__btn__plus");let j,isStorageSupport=!0,storage="";const classAction=function(e,a,t,s){e.classList.remove(a),e.classList.add(t),s&&setTimeout(function(){1!==j&&searchModal.classList.add("collapse__search__modal")},s)};searchModal.classList.add("collapse__search__modal"),searchModal.classList.add("not__appear"),searchToggle.addEventListener("click",function(e){e.preventDefault(),searchModal.classList.remove("collapse__search__modal"),searchModal.classList.remove("shake"),searchModal.classList.contains("not__appear")?(searchModal.classList.remove("collapse__search__modal"),classAction(searchModal,"not__appear","appear"),j=1):(classAction(searchModal,"appear","not__appear",2500),j=0)}),window.addEventListener("keydown",function(e){27===e.keyCode&&(searchModal.classList.contains("not__appear")||(e.preventDefault(),classAction(searchModal,"appear","not__appear",2500),j=0))}),buttonModal.addEventListener("click",function(){searchModal.classList.remove("shake"),searchModal.classList.remove("appear"),searchModal.offsetWidth=searchModal.offsetWidth;for(let e=0;e<inputModal.length;e++)e<inputRequired.length&&!inputRequired[e].value&&(missing=!0,inputRequired[e].classList.add("error")),e<inputDate.length&&(inputDate[e].oninput=function(){inputDate[e].classList.remove("error")});missing&&searchModal.classList.add("shake")});for(let e=0;e<inputCount.length;e++){try{storage=localStorage.getItem(e)}catch(e){isStorageSupport=!1}storage&&(inputCount[e].value=storage),inputCount[e].oninput=function(){inputCount[e].classList.remove("error"),isNaN(inputCount[e].value)&&(inputCount[e].value="")},btnMinus[e].addEventListener("click",function(a){a.preventDefault(),inputCount[e].value>=1&&inputCount[e].value--}),btnPlus[e].addEventListener("click",function(a){a.preventDefault(),inputCount[e].value<99&&inputCount[e].value++})}searchModal.addEventListener("submit",function(){classAction(searchModal,"shake","collapse__search__modal"),classAction(searchModal,"appear","not__appear");for(let e=0;e<inputCount.length;e++)inputCount[e].value&&isStorageSupport&&localStorage.setItem(e,inputCount[e].value)});